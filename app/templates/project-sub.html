<!DOCTYPE html>
<html>
<head>
    <title>ProjectSub</title>
    <link rel="stylesheet" type="text/css" href="/static/css/home.css">
    <script>
        const current_user_name = "{{ username }}";
        const page_language = "en";
    </script>
</head>
<body>
    <div class="header-container">
        <h1>Welcome, {{ username }}!</h1>
        <form action="/logout" method="post">
            <input type="submit" value="Logout">
            <input type="hidden" name="lang" value="jp">
        </form>
        <nav>
            <a href="/home?username={{ username }}&role={{ role }}&password={{ password }}">Home</a>
        </nav>
        <a class="JPpage" href="/project-sub-jp?username={{ username }}&role={{ role }}&password={{ password }}&lang=jp">Japanese</a>
    </div>

    <div class="container">
        {% if role == 'projectmanager' %}
        <p>You are Project Manager.</p>
        {% endif %}

        <p>Assign project to user:</p>
        <p>Attendance records before today will not be added.</p>
        <p>If project date is changed by edit, the attendance record will be updated accordingly.</p>

        <form action="/pm_create_attendance" method="post">
            <input type="hidden" name="username" value="{{ username }}">
            <input type="hidden" name="role" value="{{ role }}">
            <input type="hidden" name="password" value="{{ password }}">
            <input type="hidden" name="lang" value="en">

            <label for="pmasu_the_project_name">Project Name:</label>
            <select id="pmasu_the_project_name" name="pmasu_the_project_name" required>
                <option value="">Select Project</option>
            </select>

            <label for="pmasu_the_user_name">User Name:</label>
            <select id="pmasu_the_user_name" name="pmasu_the_user_name" required>
                <option value="">Select User</option>
            </select>

            <input type="submit" value="Submit or Update">
        </form>

        {% if pm_createattendance_message %}
        <div class="message {% if pm_createattendance_success %}success{% else %}error{% endif %}">
            {{ pm_createattendance_message }}
        </div>
        {% endif %}

        <p>Unassign project to user:</p>
        <form action="/pm_delete_attendance" method="post">
            <input type="hidden" name="username" value="{{ username }}">
            <input type="hidden" name="role" value="{{ role }}">
            <input type="hidden" name="password" value="{{ password }}">
            <input type="hidden" name="lang" value="en">

            <label for="pmuasu_the_project_name">Project Name:</label>
            <select id="pmuasu_the_project_name" name="pmuasu_the_project_name" required>
                <option value="">Select Project</option>
            </select>

            <label for="pmuasu_the_user_name">User Name:</label>
            <select id="pmuasu_the_user_name" name="pmuasu_the_user_name" required>
                <option value="">Select User</option>
            </select>

            <input type="submit" value="Delete">
        </form>

        {% if pm_deleteattendance_message %}
        <div class="message {% if pm_deleteattendance_success %}success{% else %}error{% endif %}">
            {{ pm_deleteattendance_message }}
        </div>
        {% endif %}

        {% if error %}
        <div class="message error">
            {{ error }}
        </div>
        {% endif %}
    </div>
    <script src="/static/js/home.js"></script>
</body>
</html>
