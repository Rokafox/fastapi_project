<!DOCTYPE html>
<html>

<head>
    <title>ホーム</title>
    <link rel="stylesheet" type="text/css" href="/static/css/home.css">
    <script>
        const current_user_name = "{{ username }}";
        const page_language = "jp";
    </script>
</head>

<body>
    <div class="header-container">
        <h1>ようこそ, {{ username }}さん!</h1>
        <form action="/logout" method="post">
            <input type="submit" value="ログアウト">
            <input type="hidden" name="lang" value="jp">
        </form>

        {% if role == 'sysadmin' %}
        <nav>
            <a href="/passwd-jp?username={{ username }}&role={{ role }}&password={{ password }}">パスワード変更</a>
            <a href="/useradmin-jp?username={{ username }}&role={{ role }}&password={{ password }}">ユーザー作成・削除</a>
            <a href="/project-jp?username={{ username }}&role={{ role }}&password={{ password }}">プロジェクト作成</a>
            <a href="/user-jp?username={{ username }}&role={{ role }}&password={{ password }}">ユーザー情報</a>
        </nav>
        {% endif %}

        {% if role == 'projectmanager' %}
        <nav>
            <a href="/passwd-jp?username={{ username }}&role={{ role }}&password={{ password }}">パスワード変更</a>
            <a href="/task-jp?username={{ username }}&role={{ role }}&password={{ password }}">タスク一覧</a>
            <a href="/project-sub-jp?username={{ username }}&role={{ role }}&password={{ password }}">プロジェクト割り当て</a>
            <a href="/attendance-jp?username={{ username }}&role={{ role }}&password={{ password }}">出勤一覧</a>
        </nav>
        {% endif %}

        {% if role == 'hiruchaaru' %}
        <nav>
            <a href="/passwd-jp?username={{ username }}&role={{ role }}&password={{ password }}">パスワード変更</a>
        </nav>
        {% endif %}

        <a class="JPpage" href="/home?username={{ username }}&role={{ role }}&password={{ password }}">英語</a>
    </div>

    <div class="container">

        {% if role == 'sysadmin' %}
        <p>あなたはシステム管理者です。</p>

        <p>ログインに成功しました。</p>
        {% endif %}

        {% if role == 'hiruchaaru' %}
        <p>貴方はヒルチャールです。</p>
        <p>ログインに成功しました。</p>
        <h2>ヒルチャールのお兄さんが病気になった♪</h2>
        <h2>ヒルチャールのお姉さんが看病して♪</h2>
        <h2>ヒルチャールのお兄さんが薬を飲んでも治らない♪</h2>
        <a>※原神のネタです。</a>

        <p>登録プロジェクトを表示：</p>
        <button id="hrc_show-attendances-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">プロジェクト表示</button>
        <button id="hrc_hide-attendances-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px; display: none;">プロジェクト隠す</button>

        <input type="text" id="filter-input" placeholder="高性能フェルータ" style="margin-top: 10px; padding: 8px; width: 200px; display: none;" />
        <ul id="attendance-list" style="display: none;">
            <!-- 出席リストがここに表示されます -->
        </ul>

        <p>タスクを表示:</p>
        <button id="hrctsk-show-tasks-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">タスク表示</button>
        <button id="hrctsk-hide-tasks-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px; display: none;">タスク隠す</button>

        <input type="text" id="hrctsk-filter-input" placeholder="高性能フェルータ" style="margin-top: 10px; padding: 8px; width: 200px; display: none;" />
        <ul id="hrctsk-task-list" style="display: none;">
            <!-- タスクリストがここに表示されます -->
        </ul>

        <div id="hrctsk-edit-task-modal" style="display: none;">
            <p>タスク編集：</p>
            <form id="hrctsk-edit-task-form">
                <label for="hrctsk-edit-status">詳細情報：</label>
                <textarea id="hrctsk-edit-status" rows="4"></textarea><br>

                <label for="hrctsk-edit-task-progress">進行度：</label>
                <input type="number" id="hrctsk-edit-task-progress" name="pmtsk-edit-task-progress" min="0" max="100" required><br>

                <button type="submit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">保存</button>
                <button type="button" id="hrctsk-cancel-edit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">キャンセル</button>
            </form>
        </div>
        {% endif %}

        {% if role == 'projectmanager' %}
        <p>貴方はプロジェクトマネージャーです</p>
        <p>ログインに成功しました。</p>
        <p>プロジェクト閲覧：</p>

        <button id="show-projects-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">プロジェクト表示</button>
        <button id="hide-projects-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px; display: none;">プロジェクト隠す</button>

        <input type="text" id="filter-input" placeholder="高性能フェルータ" style="margin-top: 10px; padding: 8px; width: 200px; display: none;" />
        <ul id="project-list" style="display: none;">
            <!-- プロジェクトリストがここに表示されます -->
        </ul>

        <div id="edit-project-modal" style="display: none;">
            <p>プロジェクト編集：</p>
            <form id="edit-project-form">
                <label for="edit-name">プロジェクト名：</label>
                <input type="text" id="edit-name" required><br>

                <label for="edit-description">プロジェクト詳細：</label>
                <textarea id="edit-description" rows="4" required></textarea><br>

                <label for="edit-starttime">開始日時：</label>
                <input type="datetime-local" id="edit-starttime" required><br>

                <label for="edit-endtime">終了日時</label>
                <input type="datetime-local" id="edit-endtime" required><br>

                <label for="edit-status">状態：</label>
                <select id="edit-status" required>
                    <option value="scheduled">予定</option>
                    <option value="ongoing">進行中</option>
                    <option value="Requirements_Definition">要件定義</option>
                    <option value="Basic_Design">基本設計</option>
                    <option value="Detailed_Design">詳細設計</option>
                    <option value="Programming">プログラミング</option>
                    <option value="Unit_Testing">単体テスト</option>
                    <option value="Integration_Testing">結合テスト</option>
                    <option value="System_Testing">システムテスト</option>
                </select><br>

                <button type="submit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">保存</button>
                <button type="button" id="cancel-edit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">取り消す</button>
            </form>
        </div>
        {% endif %}

        {% if error %}
        <div class="message error">
            {{ error }}
        </div>
        {% endif %}
    </div>

    <script src="/static/js/home.js"></script>
</body>

</html>
