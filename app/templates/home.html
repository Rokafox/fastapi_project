<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="/static/css/home.css">
    <script>
        const current_user_name = "{{ username }}";
        const page_language = "en";
    </script>

</head>
<body>
    <div class="header-container">
        <h1>Welcome, {{ username }}!</h1>
        <form action="/logout" method="post">
            <input type="submit" value="Logout">
            <input type="hidden" name="lang" value="en">
        </form>
        {% if role == 'sysadmin' %}
        <nav>
            <a href="/passwd?username={{ username }}&role={{ role }}&password={{ password }}">Change Passwd</a>
            <a href="/useradmin?username={{ username }}&role={{ role }}&password={{ password }}">Manage Users</a>
            <a href="/project-en?username={{ username }}&role={{ role }}&password={{ password }}">New Project</a>
            <a href="/user?username={{ username }}&role={{ role }}&password={{ password }}">User Information</a>
        </nav>
        {% endif %}
        {% if role == 'projectmanager'%}
        <nav>
            <a href="/task?username={{ username }}&role={{ role }}&password={{ password }}">task</a>
            <a href="/project-sub?username={{ username }}&role={{ role }}&password={{ password }}">Project sub</a>
            <a href="/attendance?username={{ username }}&role={{ role }}&password={{ password }}">Attendance</a>
        </nav>
        {% endif %}
        <a class="JPpage" href="/home-jp?username={{ username }}&role={{ role }}&password={{ password }}">Japanese</a>
    </div>

    <div class="container">
        {% if role == 'sysadmin' %}
            <p>You are system administrator.</p>
            <p>You have successfully logged in.</p>
        {% endif %}

        {% if role == 'hiruchaaru' %}
        <!--ヒルチャールのお兄さんが病気になった♪
            ヒルチャールのお姉さんが看病して♪
            ヒルチャールのお兄さんが薬を飲んでも治らない♪-->
            <p>You are Hiruchaaru.</p>
            <p>You have successfully logged in.</p>
            <p>View your registered projects today:</p>

            <button id="hrc_show-attendances-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">Show Projects</button>
            <button id="hrc_hide-attendances-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px; display: none;">Hide Projects</button>
            
            <input type="text" id="filter-input" placeholder="Smart Filter" style="margin-top: 10px; padding: 8px; width: 200px; display: none;"/>
            
            <ul id="attendance-list" style="display: none;">
                <!-- 出席リストがここに表示されます -->
            </ul>
            
            <p>View tasks:</p>

            <button id="hrctsk-show-tasks-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">Show Tasks</button>
            <button id="hrctsk-hide-tasks-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px; display: none;">Hide Tasks</button>
            
            <input type="text" id="hrctsk-filter-input" placeholder="Smart Filter" style="margin-top: 10px; padding: 8px; width: 200px; display: none;"/>
            
            <ul id="hrctsk-task-list" style="display: none;">
                <!-- タスクリストがここに表示されます -->
            </ul>
            
            <div id="hrctsk-edit-task-modal" style="display: none;">
                <p>Edit task:</p>
                <form id="hrctsk-edit-task-form">
                    <label for="hrctsk-edit-status">Description:</label>
                    <textarea id="hrctsk-edit-status" rows="4"></textarea><br>

                    <label for="hrctsk-edit-task-progress">Progress:</label>
                    <input type="number" id="hrctsk-edit-task-progress" name="pmtsk-edit-task-progress" min="0" max="100" required><br>

            
                    <button type="submit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">Save</button>
                    <button type="button" id="hrctsk-cancel-edit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">Cancel</button>
                </form>
            </div>
            



        {% endif %}

        {% if role == 'projectmanager' %}
            <p>You are Project Manager.</p>
            <p>You have successfully logged in.</p>
            <p>View projects:</p>

            <button id="show-projects-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">Show Projects</button>
            <button id="hide-projects-btn" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px; display: none;">Hide Projects</button>
            
            <input type="text" id="filter-input" placeholder="Smart Filter" style="margin-top: 10px; padding: 8px; width: 200px; display: none;"/>
            
            <ul id="project-list" style="display: none;">
                <!-- プロジェクトリストがここに表示されます -->
            </ul>
            

            <div id="edit-project-modal" style="display: none;">
                <p>Edit project:</p>
                <form id="edit-project-form">
                    <label for="edit-name">Name:</label>
                    <input type="text" id="edit-name" required><br>

                    <label for="edit-description">Description:</label>
                    <textarea id="edit-description" rows="4" required></textarea><br>

                    <label for="edit-starttime">Start Time:</label>
                    <input type="datetime-local" id="edit-starttime" required><br>

                    <label for="edit-endtime">End Time:</label>
                    <input type="datetime-local" id="edit-endtime" required><br>

                    <label for="edit-status">Status:</label>
                    <select id="edit-status" required>
                        <option value="scheduled">Scheduled</option>
                        <option value="ongoing">Ongoing</option>
                        <!-- completed, failed, canceled -->
                        <option value="Requirements_Definition">Requirements Definition</option>
                        <option value="Basic_Design">Basic Design</option>
                        <option value="Detailed_Design">Detailed Design</option>
                        <option value="Programming">Programming</option>
                        <option value="Unit_Testing">Unit Testing</option>
                        <option value="Integration_Testing">Integration Testing</option>
                        <option value="System_Testing">System Testing</option>
                    </select><br>

                    <button type="submit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">Save</button>
                    <button type="button" id="cancel-edit" style="background-color: #333; border: none; color: white; padding: 9px 30px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; margin: 4px 2px; cursor: pointer; border-radius: 4px;">Cancel</button>

                </form>
            </div>
            {% endif %}
        {% if error %}
            <div class="message error">
                {{ error }}
            </div>
        {% endif %}
    </div>



    <script src="/static/js/home.js"></script>
</body>
</html>
